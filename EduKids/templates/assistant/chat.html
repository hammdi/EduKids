{% load static %}
<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>EduKids â€” Assistant</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <style>
      /* minimal styles for child-friendly UI */
      body { font-family: Arial, Helvetica, sans-serif; background:#f7fbff; }
      .chat-wrap { max-width:720px; margin:24px auto; background:#fff; border-radius:12px; padding:16px; box-shadow:0 6px 18px rgba(0,0,0,0.08);} 
      .messages { height:360px; overflow:auto; border:1px dashed #e0e7ff; padding:8px; border-radius:8px; background:#f0f8ff }
      .msg { padding:8px; margin:6px 0; border-radius:8px; max-width:80%; }
      .msg.student { background:#e6fffa; margin-left:auto; text-align:right }
      .msg.assistant { background:#fff7ed; margin-right:auto; text-align:left }
      .controls { display:flex; gap:8px; margin-top:12px }
      .controls textarea { flex:1; height:60px; padding:8px; border-radius:8px }
      .lang { width:140px }
      button.primary { background:#2563eb; color:#fff; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; }
      button.primary:hover { background:#1d4ed8; }
      button.secondary { background:#10b981; color:#fff; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; margin-left:8px; }
      button.secondary:hover { background:#059669; }
      
      /* PDF History Section */
      .pdf-history-panel {
        display:none;
        max-width:720px;
        margin:24px auto;
        background:#fff;
        border-radius:12px;
        padding:16px;
        box-shadow:0 6px 18px rgba(0,0,0,0.08);
      }
      .pdf-history-panel.active { display:block; }
      .pdf-history-header {
        display:flex;
        justify-content:space-between;
        align-items:center;
        margin-bottom:16px;
        padding-bottom:12px;
        border-bottom:2px solid #e0e7ff;
      }
      .pdf-history-header h3 {
        margin:0;
        color:#2563eb;
        font-size:1.5rem;
      }
      .close-history-btn {
        background:#ef4444;
        color:#fff;
        border:none;
        padding:6px 12px;
        border-radius:8px;
        cursor:pointer;
      }
      .close-history-btn:hover { background:#dc2626; }
      .pdf-list { display:flex; flex-direction:column; gap:12px; }
      .pdf-item {
        display:flex;
        align-items:center;
        gap:12px;
        padding:12px;
        background:#f0f8ff;
        border-radius:8px;
        border:1px solid #dbeafe;
        transition:transform 0.2s, box-shadow 0.2s;
      }
      .pdf-item:hover {
        transform:translateY(-2px);
        box-shadow:0 4px 12px rgba(0,0,0,0.1);
      }
      .pdf-icon {
        font-size:2rem;
        flex-shrink:0;
      }
      .pdf-info {
        flex:1;
        min-width:0;
      }
      .pdf-title {
        font-weight:bold;
        color:#1e40af;
        margin:0 0 4px 0;
        font-size:1rem;
      }
      .pdf-meta {
        font-size:0.85rem;
        color:#6b7280;
      }
      .pdf-actions {
        display:flex;
        gap:8px;
        flex-shrink:0;
      }
      .btn-download {
        background:#10b981;
        color:#fff;
        text-decoration:none;
        padding:8px 12px;
        border-radius:6px;
        font-size:0.9rem;
        display:inline-flex;
        align-items:center;
        gap:4px;
        transition:background 0.2s;
      }
      .btn-download:hover {
        background:#059669;
      }
      .empty-state {
        text-align:center;
        padding:40px 20px;
        color:#6b7280;
      }
      .empty-state-icon {
        font-size:4rem;
        margin-bottom:16px;
      }
    </style>
  </head>
  <body>
    <div class="chat-wrap">
      <h2>Assistant EduKids</h2>
      <div>
        <label for="language">Langue:</label>
        <select id="language" class="lang">
          <option value="fr">FranÃ§ais</option>
          <option value="en">English</option>
          <option value="es">EspaÃ±ol</option>
          <option value="pt">PortuguÃªs</option>
          <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
        </select>
        <label style="margin-left:12px"><input type="checkbox" id="tts" checked> Lecture vocale</label>
        <button id="toggle-pdf-history" class="secondary">ðŸ“š Mes PDFs</button>
      </div>

      <div class="messages" id="messages"></div>

      <div class="controls">
        <textarea id="input" placeholder="Ã‰cris un message..." aria-label="message"></textarea>
        <button id="send" class="primary">Envoyer</button>
      </div>
    </div>

    <!-- PDF History Panel -->
    <div class="pdf-history-panel" id="pdf-history-panel">
      <div class="pdf-history-header">
        <h3>ðŸ“š Mes Documents PDF</h3>
        <button id="close-history" class="close-history-btn">âœ• Fermer</button>
      </div>
      <div id="pdf-list-container">
        <div class="empty-state">
          <div class="empty-state-icon">ðŸ“„</div>
          <p>Chargement des PDFs...</p>
        </div>
      </div>
    </div>

    <script src="{% static 'js/assistant_chat.js' %}"></script>
  </body>
  </html>
