{% extends 'base/base.html' %} 
{% load static %} 
{% block content %}
<div class="container">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>Classes Management</h1>  <!-- Changed from "Subjects Management" to "Classes Management" -->
    <button
      type="button"
      class="btn btn-primary"
      data-bs-toggle="modal"
      data-bs-target="#addSubjectModal"
    >
      <i class="fas fa-plus me-1"></i>Add Class  <!-- Changed "Add Subject" to "Add Class" -->
    </button>
  </div>

  <div class="row">
    {% for subject in subjects %}
    <div class="col-md-4 mb-4">
      <a
        href="{% url 'subject_detail' subject.pk %}"
        class="text-decoration-none"
      >
        <div class="card h-100">
          {% if subject.image %}
          <img
            src="{{ subject.image.url }}"
            class="card-img-top"
            alt="{{ subject.name }}"
            style="height: 200px; object-fit: cover"
          />
          {% endif %}
          <div class="card-body">
            <h5 class="card-title">
              {% if subject.icon %}
              <i class="fas {{ subject.icon }} me-2"></i>
              {% endif %} {{ subject.name }}
            </h5>
            <p class="card-text">{{ subject.description|truncatechars:100 }}</p>
            <p class="text-muted">Order: {{ subject.order }}</p>
          </div>
        </div>
      </a>
    </div>
    {% empty %}
    <div class="col-12">
      <div class="alert alert-info text-center">
        <h4>No classes available</h4>  <!-- Changed "No subjects available" to "No classes available" -->
        <p>Click "Add Class" to create your first class.</p>  <!-- Changed "Add Subject" to "Add Class" -->
      </div>
    {% endfor %}
  </div>
</div>

<!-- Modal for Adding Subject (now for Class) -->
<div
  class="modal fade"
  id="addSubjectModal"
  tabindex="-1"
  aria-labelledby="addSubjectModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="addSubjectModalLabel">Add New Class</h5>  <!-- Changed "Add New Subject" to "Add New Class" -->
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="modal-body">
          <input type="hidden" name="add_subject" value="1" />

          <div class="mb-3">
            <label for="{{ subject_form.name.id_for_label }}" class="form-label"
              >Class Name</label  <!-- Changed "Subject Name" to "Class Name" -->
            >
            {{ subject_form.name }}
          </div>

          <div class="mb-3">
            <label
              for="{{ subject_form.description.id_for_label }}"
              class="form-label"
              >Description</label
            >
            {{ subject_form.description }}
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              <label
                for="{{ subject_form.icon.id_for_label }}"
                class="form-label"
                >Icon</label
              >
              {{ subject_form.icon }}
              <small class="form-text text-muted"
                >Example: fa-book, fa-calculator</small
              >
            </div>

            <div class="col-md-6 mb-3">
              <label
                for="{{ subject_form.color.id_for_label }}"
                class="form-label"
                >Color</label
              >
              {{ subject_form.color }}
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              <label
                for="{{ subject_form.order.id_for_label }}"
                class="form-label"
                >Order</label
              >
              {{ subject_form.order }}
            </div>

            <div class="col-md-6 mb-3">
              <label
                for="{{ subject_form.image.id_for_label }}"
                class="form-label"
                >Image</label
              >
              {{ subject_form.image }}
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-secondary"
            data-bs-dismiss="modal"
          >
            Cancel
          </button>
          <button type="submit" class="btn btn-primary">
            <i class="fas fa-plus me-1"></i>Add Class  <!-- Changed "Add Subject" to "Add Class" -->
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
