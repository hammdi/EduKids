{% extends 'base/base.html' %} {% load static %} {% block content %}
<div class="container">
  <!-- Breadcrumb -->
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item">
        <a href="{% url 'student_subjects_list' %}">Mes Matières</a>
      </li>
      <li class="breadcrumb-item active" aria-current="page">
        {{ subject.name }}
      </li>
    </ol>
  </nav>

  <!-- Subject Header -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card" style="border-left: 5px solid {{ subject.color }};">
        <div class="card-body">
          <h1>
            {% if subject.icon %}<i
              class="fas {{ subject.icon }} me-2"
              style="color: {{ subject.color }};"
            ></i
            >{% endif %} {{ subject.name }} {% if student_grade %}<span
              class="badge bg-info ms-2"
              >{{ student_grade }}</span
            >{% endif %}
          </h1>
          <p class="lead">{{ subject.description }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Topics -->
  <h3>Thèmes disponibles</h3>
  <div class="row">
    {% for item in topics_with_indicators %}
    <div class="col-md-4 mb-4">
      <!-- Added col class -->
      <a
        href="{% url 'student_topic_detail' item.topic.pk %}"
        class="text-decoration-none"
      >
        <!-- Added link -->
        <div class="card h-100">
          <div class="card-body">
            <h5>
              {{ item.topic.name }} {% if item.has_new %}<span
                class="badge bg-danger"
                >New!</span
              >{% endif %}
            </h5>
            <p class="card-text">
              {{ item.topic.description|truncatechars:120 }}
            </p>
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <span class="badge bg-success me-2">{{ item.topic.lessons_count }} leçon{{item.topic.lessons_count|pluralize }}</span>
                <span class="badge bg-primary">{{ item.topic.exercises_count }} exercice{{ item.topic.exercises_count|pluralize }}</span>
              </div>
              <i class="fas fa-arrow-right text-muted"></i>
            </div>
          </div>
        </div>
      </a>
    </div>
    {% empty %}
    <div class="alert alert-info text-center">
      <h4>Aucun thème disponible</h4>
      <p>Revenez plus tard pour de nouveaux contenus.</p>
    </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
